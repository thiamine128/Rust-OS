# 1 "src/exception/genex.S"
# 1 "<built-in>"
# 1 "<command-line>"
# 1 "src/exception/genex.S"
# 1 "./include4asm/asm/asm.h" 1
# 1 "./include4asm/asm/cp0regdef.h" 1
# 2 "./include4asm/asm/asm.h" 2
# 1 "./include4asm/asm/regdef.h" 1
# 3 "./include4asm/asm/asm.h" 2
# 2 "src/exception/genex.S" 2
# 1 "./include4asm/restore_all.h" 1
# 1 "./include4asm/asm/asm.h" 1
# 2 "./include4asm/restore_all.h" 2
# 1 "./include4asm/mmu.h" 1
# 3 "./include4asm/restore_all.h" 2
# 1 "./include4asm/trap.h" 1
# 4 "./include4asm/restore_all.h" 2

.macro RESTORE_ALL
.set noreorder
.set noat
 lw $2, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 mtc0 $2, $12
 lw $3, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 mtlo $3
 lw $2, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $3, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 mthi $2
 mtc0 $3, $14
 lw $31, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $30, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $28, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $25, ((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $24, ((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $23, ((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $22, ((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $21, ((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $20, ((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $19, ((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $18, ((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $17, ((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $16, ((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $15, ((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $14, ((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $13, ((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $12, ((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $11, ((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $10, ((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $9, ((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $8, ((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $7, ((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $6, ((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $5, ((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)($29)
 lw $4, ((((((((0) + 4)) + 4)) + 4)) + 4)($29)
 lw $3, ((((((0) + 4)) + 4)) + 4)($29)
 lw $2, ((((0) + 4)) + 4)($29)
 lw $1, ((0) + 4)($29)
 lw $29, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)($29)
.set at
.set reorder
.endm
# 3 "src/exception/genex.S" 2

.macro BUILD_HANDLER exception handler
.globl handle_\exception; .align 2; .type handle_\exception, @function; .ent handle_\exception; handle_\exception: .frame $29, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4) + 8, $0
 move $4, $29
 addiu $29, $29, -8
 jal \handler
 addiu $29, $29, 8
 j ret_from_exception
.end handle_\exception; .size handle_\exception, .- handle_\exception
.endm

.text

.globl ret_from_exception; .type ret_from_exception, @function; ret_from_exception:
 RESTORE_ALL
 eret

.globl handle_int; .align 2; .type handle_int, @function; .ent handle_int; handle_int: .frame $29, ((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((((0) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4)) + 4), $0
 mfc0 $8, $13
 mfc0 $10, $12
 and $8, $10
 andi $9, $8, 0x8000
 bnez $9, timer_irq
timer_irq:
 li $4, 0
 j schedule
.end handle_int; .size handle_int, .- handle_int

BUILD_HANDLER tlb do_tlb_refill


BUILD_HANDLER mod do_tlb_mod
BUILD_HANDLER sys do_syscall


BUILD_HANDLER reserved do_reserved
